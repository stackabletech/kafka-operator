== Kubernetes custom resource options

The cluster can be configured via a YAML file. This custom resource specifies the amount of replicas for each role group, role group or role specific configuration like port definitions etc.

[source,yaml]
----
apiVersion: kafka.stackable.tech/v1alpha1
kind: KafkaCluster
metadata:
  name: simple-kafka
spec:
  image:
    productVersion: 3.3.1
    stackableVersion: 0.3.0
  zookeeperConfigMapName: simple-kafka-znode
  brokers:
    roleGroups:
      default:
        replicas: 1
----

=== Structure

There are three levels of configuration:

[cols="1,1"]
|===
|Common shared options
|Contains configuration that is shared within the whole cluster ensemble. E.g., version, image, encryption or logging.

|Role options
|This configuration is shared for all roles of a certain type (in this operator, only the Broker role).

|RoleGroup options
|Options provided in the role group apply to each created "pod".
|===

=== Common shared options
[cols="1,1,1,1"]
|===
|Name
|Type
|Description
|Related Kafka properties

|version
|string
|The Kafka version used in the format: x.y.z-stackableX.Y.Z
|

|zookeeperConfigMapName
|string
|A reference to a ConfigMap containing a connection string for connecting to a ZooKeeper cluster
|

|opa
|struct
|An OPA configuration for Kafka, consisting of an OPA reference (namespace, name) and some authorizer properties
|
|===

=== Role & RoleGroup options
We pool Role and RoleGroup options, since they are the same for Role and RoleGroup.

==== Broker
[cols="1,1,1,1,1"]
|===
|Name
|Type
|Description
|Related Kafka properties
|Location

|===
